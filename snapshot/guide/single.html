<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script src="/cdn-cgi/apps/head/3cOPSgo5Omz84ycX7CvigfX4cpw.js"></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-82213539-2"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'UA-82213539-2');
        </script>
        <title>Grails Mail Plugin 4.0.1-SNAPSHOT</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8" />
        <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8" />
    <script type="text/javascript">
function addJsClass(el) {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
    </head>

    <body class="body" onload="addJsClass();">
        <div id="navigation">
            <div class="navTitle">
                
                Grails Mail Plugin
            </div>
            <div class="navLinks">
                <ul>
                    <li>
                        <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                            <a href="../guide/index.html" class="button">Table of contents</a>
                            <div id="nav-summary-childs" style="display:none;">
                                
                                <div class="toc-item" style="margin-left:0"><a href="#1.%20Introduction"><strong>1</strong><span>Introduction</span></a></div>
                                
                                <div class="toc-item" style="margin-left:0"><a href="#2.%20Configuration"><strong>2</strong><span>Configuration</span></a></div>
                                
                                <div class="toc-item" style="margin-left:0"><a href="#3.%20Sending%20Email"><strong>3</strong><span>Sending Email</span></a></div>
                                
                                <div class="toc-item" style="margin-left:0"><a href="#4.%20Testing"><strong>4</strong><span>Testing</span></a></div>
                                
                            </div>
                        </div>
                    </li>
                    <li class="separator selected">
                        <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
                    </li>
                </ul>

            </div>
        </div>


        <table id="colset" border="0" cellpadding="0" cellspacing="0">
            <tr>
                <td id="col1">
                    <div id="main" class="corner-all">

                        <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                        <div class="project">
                            <h1>Grails Mail Plugin</h1>
                            <p><strong>Authors:</strong> The Grails Team</p>
                            <p><strong>Version:</strong> 4.0.1-SNAPSHOT</p>
                            
                        </div>

                        
                        <div id="table-of-content">
                            <h2>Table of Contents</h2>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#1.%20Introduction"><strong>1</strong><span>Introduction</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#2.%20Configuration"><strong>2</strong><span>Configuration</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#2.1%20SMTP%20Server%20Configuration"><strong>2.1</strong><span>SMTP Server Configuration</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#2.2%20Defaults%20Configuration"><strong>2.2</strong><span>Defaults Configuration</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#2.3%20Other%20Configuration"><strong>2.3</strong><span>Other Configuration</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#3.%20Sending%20Email"><strong>3</strong><span>Sending Email</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#3.1%20Sender%20And%20Recipient"><strong>3.1</strong><span>Sender And Recipient</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#3.2%20Message%20Content"><strong>3.2</strong><span>Message Content</span></a></div>
                            
                            <div class="toc-item" style="margin-left:10px"><a href="#3.3%20Attachments"><strong>3.3</strong><span>Attachments</span></a></div>
                            
                            <div class="toc-item" style="margin-left:0px"><a href="#4.%20Testing"><strong>4</strong><span>Testing</span></a></div>
                            
                            <div style="clear:both" ></div>
                        </div>
                        
                        

<h1 id="1. Introduction">1 Introduction</h1>


The Grails mail plugin provides a convenient DSL for  <em class="italic">sending</em>  email. It supports plain text, html, attachments, inline resources and i18n among other features.<p class="paragraph"/>Mail can be sent using the <code>mailService</code> via the <code>sendMail</code> method. Here is an exampleâ€¦<p class="paragraph"/><div class="code"><pre>mailService.sendMail &#123;
   to <span class="java&#45;quote">"fred@gmail.com"</span>, <span class="java&#45;quote">"ginger&#64;gmail.com"</span>
   from <span class="java&#45;quote">"john@gmail.com"</span>
   cc <span class="java&#45;quote">"marge@gmail.com"</span>, <span class="java&#45;quote">"ed&#64;gmail.com"</span>
   bcc <span class="java&#45;quote">"joe@gmail.com"</span>
   subject <span class="java&#45;quote">"Hello John"</span>
   text <span class="java&#45;quote">"<span class="java&#45;keyword">this</span> is some text"</span>
&#125;</pre></div><p class="paragraph"/>Here we are sending a plain text email with no attachments to the given addresses.<p class="paragraph"/>The <code>sendMail</code> method is injected into all controllers to simplify access:<p class="paragraph"/><div class="code"><pre>sendMail &#123;
   to <span class="java&#45;quote">"fred@g2one.com"</span>
   subject <span class="java&#45;quote">"Hello Fred"</span>
   text <span class="java&#45;quote">"How are you?"</span>
&#125;</pre></div>


<h1 id="2. Configuration">2 Configuration</h1>





<h2 id="2.1 SMTP Server Configuration">2.1 SMTP Server Configuration</h2>


By default the plugin assumes an unsecured mail server configured on port 25, getting the SMTP host name from the environment variable SMTP_HOST. However you can change this via the grails-app/conf/Config.groovy file. For example here is how you would configure the default sender to send with a Gmail account:<p class="paragraph"/><div class="code"><pre>grails &#123;
   mail &#123;
     host = <span class="java&#45;quote">"smtp.gmail.com"</span>
     port = 465
     username = <span class="java&#45;quote">"youracount@gmail.com"</span>
     password = <span class="java&#45;quote">"yourpassword"</span>
     props = &#91;<span class="java&#45;quote">"mail.smtp.auth"</span>:<span class="java&#45;quote">"<span class="java&#45;keyword">true</span>"</span>,
              <span class="java&#45;quote">"mail.smtp.socketFactory.port"</span>:<span class="java&#45;quote">"465"</span>,
              <span class="java&#45;quote">"mail.smtp.socketFactory.class"</span>:<span class="java&#45;quote">"javax.net.ssl.SSLSocketFactory"</span>,
              <span class="java&#45;quote">"mail.smtp.socketFactory.fallback"</span>:<span class="java&#45;quote">"<span class="java&#45;keyword">false</span>"</span>&#93;
   &#125;
&#125;</pre></div><p class="paragraph"/>And the configuration for sending via a Hotmail/Live account:<p class="paragraph"/><div class="code"><pre>grails &#123;
   mail &#123;
     host = <span class="java&#45;quote">"smtp.live.com"</span>
     port = 587
     username = <span class="java&#45;quote">"youracount@live.com"</span>
     password = <span class="java&#45;quote">"yourpassword"</span>
     props = &#91;<span class="java&#45;quote">"mail.smtp.starttls.enable"</span>:<span class="java&#45;quote">"<span class="java&#45;keyword">true</span>"</span>,
              <span class="java&#45;quote">"mail.smtp.port"</span>:<span class="java&#45;quote">"587"</span>&#93;
   &#125;
&#125;</pre></div><p class="paragraph"/>If your mail session is provided via JNDI you can use the jndiName setting:<p class="paragraph"/><div class="code"><pre>grails.mail.jndiName = <span class="java&#45;quote">"myMailSession"</span></pre></div>



<h2 id="2.2 Defaults Configuration">2.2 Defaults Configuration</h2>


You can set various  <em class="italic">default</em>  settings via the application config that will be used in the absence of explicit values when sending mail.<p class="paragraph"/>You can also set the default "from" address to use for messages in Config using:<p class="paragraph"/><div class="code"><pre>grails.mail.<span class="java&#45;keyword">default</span>.from = <span class="java&#45;quote">"server@yourhost.com"</span></pre></div><p class="paragraph"/>You can also set the default "to" address to use for messages in Config using:<p class="paragraph"/><div class="code"><pre>grails.mail.<span class="java&#45;keyword">default</span>.to = <span class="java&#45;quote">"user@yourhost.com"</span></pre></div>


<h2 id="2.3 Other Configuration">2.3 Other Configuration</h2>


<h3>Disabling Mail Sending</h3><p class="paragraph"/>You can completely disable the sending of mail by setting:<p class="paragraph"/><div class="code"><pre>grails.mail.disabled = <span class="java&#45;keyword">true</span></pre></div><p class="paragraph"/>You may want to set this value for the development and/or test environments. However, this will treat any call to <code>mailService.sendMail()</code> as a no-op which means that the mail plugin will not attempt to render the email message or assemble any attachments. This can hide issues such as incorrect view names, invalid configuration or non existent during development.<p class="paragraph"/>Consider using the <a href="http://www.grails.org/plugin/greenmail" target="blank">greenmail plugin</a> which allows you to start an in memory test SMTP server for local development. This allows you to test more of your code.<p class="paragraph"/><h3>Overriding Addresses</h3><p class="paragraph"/>An alternative to disabling email or using something like the <a href="http://www.grails.org/plugin/greenmail" target="blank">greenmail plugin</a> is to use the <code>overrideAddress</code> config setting for your development and/or test environment to force all mail to be delivered to a specific address, regardless of what the addresses were at send time:<p class="paragraph"/><div class="code"><pre>grails.mail.overrideAddress = <span class="java&#45;quote">"test@address.com"</span></pre></div>



<h1 id="3. Sending Email">3 Sending Email</h1>


Mail is sent using the <code>sendMail()</code> method of the <code>mailService</code>. This plugin also adds a shortcut <code>sendMail()</code> method to all controllers and services in your application that simply delegates to the <code>mailService</code>. There is no difference between the two methods so the choice is stylistic.<p class="paragraph"/><div class="code"><pre>class PersonController &#123;<p class="paragraph"/>    def create = &#123;
        // create user<p class="paragraph"/>        sendMail &#123;
            from <span class="java&#45;quote">"admin@mysystem.com"</span>
            subject <span class="java&#45;quote">"New user"</span>
            text <span class="java&#45;quote">"A <span class="java&#45;keyword">new</span> user has been created"</span>
        &#125;
    &#125;
&#125;</pre></div><p class="paragraph"/>The <code>sendMail()</code> method takes a single <code>Closure</code> argument that uses a DSL to configure the message to be sent. This section describes the aspects of the DSL.<p class="paragraph"/><div class="code"><pre>class PersonController &#123;<p class="paragraph"/>    def mailService<p class="paragraph"/>    def create = &#123;
        // create user<p class="paragraph"/>        mailService.sendMail &#123;
            from <span class="java&#45;quote">"admin@mysystem.com"</span>
            subject <span class="java&#45;quote">"New user"</span>
            text <span class="java&#45;quote">"A <span class="java&#45;keyword">new</span> user has been created"</span>
        &#125;
    &#125;
&#125;</pre></div>



<h2 id="3.1 Sender And Recipient">3.1 Sender And Recipient</h2>


<h3>Recipients</h3><p class="paragraph"/>The DSL provides <code>to</code>, <code>cc</code> and <code>bcc</code> methods that allow you to set one or more address values for these recipient types.<p class="paragraph"/><div class="code"><pre>sendMail &#123;
    to <span class="java&#45;quote">"someone@org.com"</span>
    cc <span class="java&#45;quote">"manager@org.com"</span>
    bcc <span class="java&#45;quote">"employee1&#64;org.com"</span>, <span class="java&#45;quote">"employee2&#64;org.com"</span>
    â€¦
&#125;</pre></div><p class="paragraph"/>All methods take one or more string values that are an email address using the syntax of <a href="http://www.ietf.org/rfc/rfc822.txt." target="blank">RFC822</a> Typical address syntax is of the form <code>"user&#64;host.domain"</code> or <code>"Personal Name &#60;user&#64;host.domain&#62;"</code>.<p class="paragraph"/>You can supply multiple values for <code>to</code>, <code>cc</code> and <code>bcc</code>.<p class="paragraph"/><div class="code"><pre>sendMail &#123;
    to <span class="java&#45;quote">"someone@org.com"</span>, <span class="java&#45;quote">"someone.<span class="java&#45;keyword">else</span>&#64;org.com"</span>
    â€¦
&#125;</pre></div><p class="paragraph"/>If no value is provided for <code>to</code> when sending an email, the  <em class="italic">default to address</em>  will be used.<p class="paragraph"/><blockquote class="warning">
If the configuration property <code>grails.mail.overrideAddress</code> is set, each recipient address specified will be substituted with the override address. See the configuration section for more information.
</blockquote><p class="paragraph"/><h3>Sender</h3><p class="paragraph"/>The sender address of the email is configured by the <code>from</code> method.<p class="paragraph"/><div class="code"><pre>sendMail &#123;
    from <span class="java&#45;quote">"me&#64;org.com"</span>
    â€¦
&#125;</pre></div><p class="paragraph"/>The <code>from</code> method accepts one string value email address using the syntax of <a href="http://www.ietf.org/rfc/rfc822.txt." target="blank">RFC822</a> Typical address syntax is of the form <code>"user&#64;host.domain"</code> or <code>"Personal Name &#60;user&#64;host.domain&#62;"</code>.<p class="paragraph"/>If no value is provided for <code>from</code> when sending an email, the  <em class="italic">default from address</em>  will be used.


<h2 id="3.2 Message Content">3.2 Message Content</h2>


Message content is specified by either the <code>text</code> and/or <code>html</code> methods that specify either the plain text or HTML content respectively.<p class="paragraph"/><blockquote class="note">
As of version 1.0, the <code>body</code> method that could be used to specify the message content has been deprecated (but is still there). The <code>body</code> method requires the user to specify the content type of the message using a GSP directive such as:<p class="paragraph"/>&#60;%&#64; page contentType="text/html" %&#62;
</blockquote><p class="paragraph"/><h3>HTML Email</h3><p class="paragraph"/>To send HTML mail you can use the <code>html</code> method. This will set the content type of the message to <code>text/html</code>.<p class="paragraph"/>You can either supply a string valueâ€¦<p class="paragraph"/><div class="code"><pre>sendMail &#123;
    to <span class="java&#45;quote">"user@somewhere.org"</span>
    subject <span class="java&#45;quote">"Hello John"</span>
    html <span class="java&#45;quote">"&#60;b&#62;Hello&#60;/b&#62; World"</span>
&#125;</pre></div><p class="paragraph"/>Or a view to render to form the contentâ€¦<p class="paragraph"/><div class="code"><pre>sendMail &#123;
    to <span class="java&#45;quote">"user@somewhere.org"</span>
    subject <span class="java&#45;quote">"Hello John"</span>
    html view: <span class="java&#45;quote">"/emails/hello"</span>, model: &#91;param1: <span class="java&#45;quote">"value1"</span>, param2: <span class="java&#45;quote">"value2"</span>&#93;
&#125;</pre></div><p class="paragraph"/>See the section on using views for more details of the parameters to this version of <code>html</code>.<p class="paragraph"/><h3>Plain Text Email</h3><p class="paragraph"/>To send plain text mail you can use the <code>text</code> method. This will set the content type of the message to <code>text/plain</code>.<p class="paragraph"/>You can either supply a string valueâ€¦<p class="paragraph"/><div class="code"><pre>sendMail &#123;
    to <span class="java&#45;quote">"user@somewhere.org"</span>
    subject <span class="java&#45;quote">"Hello John"</span>
    text <span class="java&#45;quote">"Hello World"</span>
&#125;</pre></div><p class="paragraph"/>Or a view to render to form the contentâ€¦<p class="paragraph"/><div class="code"><pre>sendMail &#123;
    to <span class="java&#45;quote">"user@somewhere.org"</span>
    subject <span class="java&#45;quote">"Hello John"</span>
    text view: <span class="java&#45;quote">"/emails/hello"</span>, model: &#91;param1: <span class="java&#45;quote">"value1"</span>, param2: <span class="java&#45;quote">"value2"</span>&#93;
&#125;</pre></div><p class="paragraph"/>See the section on using views for more details of the parameters to this version of <code>text</code>.<p class="paragraph"/><h3>Plain Text <strong class="bold">and</strong> HTML</h3><p class="paragraph"/>It is possible to send a multipart message that contains both plain text and HTML versions of the message. In this situation, the mail reading client is responsible for selecting the variant to display to the user.<p class="paragraph"/>To do this, simply use both the <code>html</code> and <code>text</code> methodsâ€¦<p class="paragraph"/><div class="code"><pre>sendMail &#123;
    to <span class="java&#45;quote">"user@somewhere.org"</span>
    subject <span class="java&#45;quote">"Hello John"</span>
    text view: <span class="java&#45;quote">"/emails/text&#45;hello"</span>, model: &#91;param1: <span class="java&#45;quote">"value1"</span>, param2: <span class="java&#45;quote">"value2"</span>&#93;
    html view: <span class="java&#45;quote">"/emails/html&#45;hello"</span>, model: &#91;param1: <span class="java&#45;quote">"value1"</span>, param2: <span class="java&#45;quote">"value2"</span>&#93;
&#125;</pre></div><p class="paragraph"/><h3>Using Views</h3><p class="paragraph"/>Both the <code>text</code> and <code>html</code> methods support specifying a view to render to form the content. These are the accepted parameters:
<ul class="star">
<li>The  <em class="italic">view</em>  is the absolute path (or relative to the current controller if during a request) to the GSP, just like the existing Grails <code>render</code> method.</li>
<li>The  <em class="italic">plugin</em>  parameter is only necessary if the  view you wish to render comes from a plugin, just like the existing Grails <code>render</code> method.</li>
<li>The  <em class="italic">model</em>  parameter is a map representing the model the GSP will see for rendering data, just like the existing Grails <code>render</code> method.</li>
</ul><p class="paragraph"/>


<h2 id="3.3 Attachments">3.3 Attachments</h2>


The mail plugin is capable of adding attachments to messages as independent files and inline resources. To enable attachment support, you <strong class="bold">MUST</strong> indicate that the message is to be  <em class="italic">multipart</em>  as the <strong class="bold">first</strong> thing you do in the mail DSL.<p class="paragraph"/><div class="code"><pre>sendMail &#123;
    multipart <span class="java&#45;keyword">true</span>
&#125;</pre></div><p class="paragraph"/><h3>File Attachments</h3><p class="paragraph"/>The term file attachments here refers to the attachment being received as a file, not necessarily using a file in your application to form the attachment.<p class="paragraph"/>The following methods are available in the mail DSL to attach filesâ€¦<p class="paragraph"/><div class="code"><pre>// Bytes
attach(<span class="java&#45;object">String</span> fileName, <span class="java&#45;object">String</span> contentType, <span class="java&#45;object">byte</span>&#91;&#93; bytes)<p class="paragraph"/>// Files
attach(File file)
attach(<span class="java&#45;object">String</span> fileName, File file)
attach(<span class="java&#45;object">String</span> fileName, <span class="java&#45;object">String</span> contentType, File file)<p class="paragraph"/>// InputStream
attach(<span class="java&#45;object">String</span> fileName, <span class="java&#45;object">String</span> contentType, InputStreamSource source)</pre></div><p class="paragraph"/>There are 3 things that need to be provided when creating a file attachment:
<ul class="star">
<li>file name - what the email client will call the file</li>
<li>content type - what mime type the email client will treat the file as</li>
<li>content source - the actual attachment</li>
</ul><p class="paragraph"/>The mail plugin supports using either a <code>byte&#91;&#93;</code>, <code>File</code>, or <a href="http://static.springsource.org/spring/docs/current/api/org/springframework/core/io/InputStreamSource.html" target="blank"><code>InputStreamSource</code></a> as the content source.<p class="paragraph"/>In the case of the variants that take a <code>File</code> that do not specify a file name, the name of the file will be used.<p class="paragraph"/>In the case of the variants that take a <code>File</code> that do not specify a content type, the content type will be guessed based on the file extension.<p class="paragraph"/><div class="code"><pre>sendMail &#123;
    multipart <span class="java&#45;keyword">true</span>
    to <span class="java&#45;quote">"someone@org.com"</span>
    attach <span class="java&#45;quote">"yourfile.txt"</span>, <span class="java&#45;quote">"text/plain"</span>, <span class="java&#45;quote">"Hello!"</span> as <span class="java&#45;object">byte</span>&#91;&#93;
&#125;</pre></div><p class="paragraph"/><h3>Inline Attachments</h3><p class="paragraph"/>It is also possible to attach content as inline resources. This is particularly useful in the case of html email where you wish to embed images in the message. In this case you specify a  <em class="italic">content id</em>  instead of a file name for the attachment and then reference this content id in your mail message.<p class="paragraph"/>To attach an image as an inline resource you could doâ€¦<p class="paragraph"/><div class="code"><pre>sendMail &#123;
    multipart <span class="java&#45;keyword">true</span>
    to <span class="java&#45;quote">"someone@org.com"</span>
    inline <span class="java&#45;quote">"logo"</span>, <span class="java&#45;quote">"image/jpeg"</span>, <span class="java&#45;keyword">new</span> File(<span class="java&#45;quote">"logo.jpg"</span>)
    html view: <span class="java&#45;quote">"/email/welcome"</span>
&#125;</pre></div><p class="paragraph"/>Then in your view you reference the inline attachment using the <code>cid:</code> (content id) namespaceâ€¦<p class="paragraph"/><div class="code"><pre>&#60;html&#62;
  &#60;body&#62;
    &#60;img src='cid:logo' /&#62;
    &#60;p&#62;Welcome Aboard!&#60;/p&#62;
  &#60;/body&#62;
&#60;/html&#62;</pre></div><p class="paragraph"/>The following methods are available in the mail DSL to attach filesâ€¦<p class="paragraph"/><div class="code"><pre>// Bytes
inline(<span class="java&#45;object">String</span> fileName, <span class="java&#45;object">String</span> contentType, <span class="java&#45;object">byte</span>&#91;&#93; bytes)<p class="paragraph"/>// Files
inline(File file)
inline(<span class="java&#45;object">String</span> fileName, File file)
inline(<span class="java&#45;object">String</span> fileName, <span class="java&#45;object">String</span> contentType, File file)<p class="paragraph"/>// InputStream
inline(<span class="java&#45;object">String</span> fileName, <span class="java&#45;object">String</span> contentType, InputStreamSource source)</pre></div><p class="paragraph"/>There are 3 things that need to be provided when creating an inline attachment:
<ul class="star">
<li>content id - the identifier of the resource</li>
<li>content type - what mime type the email client will treat the content as</li>
<li>content source - the actual content</li>
</ul><p class="paragraph"/>The mail plugin supports using either a <code>byte&#91;&#93;</code>, <code>File</code>, or <a href="http://static.springsource.org/spring/docs/current/api/org/springframework/core/io/InputStreamSource.html" target="blank"><code>InputStreamSource</code></a> as the content source.<p class="paragraph"/>In the case of the variants that take a <code>File</code> that do not specify a content id, the name of the file will be used.<p class="paragraph"/>In the case of the variants that take a <code>File</code> that do not specify a content type, the content type will be guessed based on the file extension.


<h1 id="4. Testing">4 Testing</h1>


Typically, you don't want to actually send email as part of your automated tests. Besides wrapping all calls to <code>sendMail</code> in an environment sensitive guard (which is a very bad idea), you can use one of the following techniques to deal with this.<p class="paragraph"/><h3>Disabling mail sending</h3><p class="paragraph"/>You can effectively disable mail sending globally in your test by setting the following value in your application for the test environment.<p class="paragraph"/><div class="code"><pre>grails.mail.disabled = <span class="java&#45;keyword">true</span></pre></div><p class="paragraph"/>This will effectively cause all calls to <code>sendMail()</code> to be a non operation, with a warning being logged that mail is disabled. The advantage of this technique is that it is cheap. The disadvantage is that it makes it impossible to test that mail would be sent and to inspect any aspects of the sent mail.<p class="paragraph"/><h3>Using an override address</h3><p class="paragraph"/>You can  <em class="italic">override</em>  any and all recipient email addresses in <code>sendMail()</code> calls to force messages to be delivered to a certain mailbox.<p class="paragraph"/><div class="code"><pre>grails.mail.overrideAddress = <span class="java&#45;quote">"test&#64;myorg.com"</span></pre></div><p class="paragraph"/>All <code>to</code>, <code>cc</code> and <code>bcc</code> addresses will be replaced by this value if set. The advantage of this mechanism is that it allows you to test using a real SMTP server. The disadvantage is that it requires a real SMTP server and makes it difficult to test address determination logic.<p class="paragraph"/><h3>Using the GreenMail plugin</h3><p class="paragraph"/>The preferred approach is to use the existing <a href="http://www.grails.org/plugin/greenmail" target="blank">grails-greenmail</a> plugin to run an in-memory SMTP server inside your application. This allows you to fully exercise your mail sending code and to inspect sent mail to assert correct values for recipient addresses etc.<p class="paragraph"/>The advantage of this approach is that it is as close as possible to real world and gives you access to the sent email in your tests. The disadvantage is that it is another plugin dependency.<p class="paragraph"/>Consult the documentation for the plugin for more information.

                    </div>
                </td>
                <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                </div>
            </div>
        </td>
            </tr>
        </table>

        <div id="footer">
            
            
        </div>



<script type="text/javascript" src="../js/docs.js"></script>

    </body>
</html>
