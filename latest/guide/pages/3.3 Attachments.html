<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script src="/cdn-cgi/apps/head/3cOPSgo5Omz84ycX7CvigfX4cpw.js"></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-82213539-2"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-82213539-2');
    </script>
    <title>3.3 Attachments 4.0.0</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <div class="navTitle">
        
        Grails Mail Plugin
    </div>
    <div class="navLinks">
        <ul>
            <li>
                <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                    <a href="../../guide/index.html" class="button">Table of contents</a>

                    <div id="nav-summary-childs" style="display:none;">
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/1.%20Introduction.html"><strong>1</strong><span>Introduction</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/2.%20Configuration.html"><strong>2</strong><span>Configuration</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/3.%20Sending%20Email.html"><strong>3</strong><span>Sending Email</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/4.%20Testing.html"><strong>4</strong><span>Testing</span></a>
                        </div>
                        
                    </div>
                </div>
            </li>
            <li class="separator selected">
                <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
            </li>
        </ul>
    </div>


</div>

<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../../guide/2.%20Configuration.html">&lt;&lt; <strong>2</strong><span>Configuration</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../../guide/4.%20Testing.html"><strong>4</strong><span>Testing</span> >></a></div>
                


                <div class="project">
                    <h1>3.3 Attachments</h1>

                    <p><strong>Version:</strong> 4.0.0</p>
                </div>

                

                

<h2 id="3.3 Attachments">3.3 Attachments</h2>


The mail plugin is capable of adding attachments to messages as independent files and inline resources. To enable attachment support, you <strong class="bold">MUST</strong> indicate that the message is to be  <em class="italic">multipart</em>  as the <strong class="bold">first</strong> thing you do in the mail DSL.<p class="paragraph"/><div class="code"><pre>sendMail &#123;
    multipart <span class="java&#45;keyword">true</span>
&#125;</pre></div><p class="paragraph"/><h3>File Attachments</h3><p class="paragraph"/>The term file attachments here refers to the attachment being received as a file, not necessarily using a file in your application to form the attachment.<p class="paragraph"/>The following methods are available in the mail DSL to attach files…<p class="paragraph"/><div class="code"><pre>// Bytes
attach(<span class="java&#45;object">String</span> fileName, <span class="java&#45;object">String</span> contentType, <span class="java&#45;object">byte</span>&#91;&#93; bytes)<p class="paragraph"/>// Files
attach(File file)
attach(<span class="java&#45;object">String</span> fileName, File file)
attach(<span class="java&#45;object">String</span> fileName, <span class="java&#45;object">String</span> contentType, File file)<p class="paragraph"/>// InputStream
attach(<span class="java&#45;object">String</span> fileName, <span class="java&#45;object">String</span> contentType, InputStreamSource source)</pre></div><p class="paragraph"/>There are 3 things that need to be provided when creating a file attachment:
<ul class="star">
<li>file name - what the email client will call the file</li>
<li>content type - what mime type the email client will treat the file as</li>
<li>content source - the actual attachment</li>
</ul><p class="paragraph"/>The mail plugin supports using either a <code>byte&#91;&#93;</code>, <code>File</code>, or <a href="http://static.springsource.org/spring/docs/current/api/org/springframework/core/io/InputStreamSource.html" target="blank"><code>InputStreamSource</code></a> as the content source.<p class="paragraph"/>In the case of the variants that take a <code>File</code> that do not specify a file name, the name of the file will be used.<p class="paragraph"/>In the case of the variants that take a <code>File</code> that do not specify a content type, the content type will be guessed based on the file extension.<p class="paragraph"/><div class="code"><pre>sendMail &#123;
    multipart <span class="java&#45;keyword">true</span>
    to <span class="java&#45;quote">"someone@org.com"</span>
    attach <span class="java&#45;quote">"yourfile.txt"</span>, <span class="java&#45;quote">"text/plain"</span>, <span class="java&#45;quote">"Hello!"</span> as <span class="java&#45;object">byte</span>&#91;&#93;
&#125;</pre></div><p class="paragraph"/><h3>Inline Attachments</h3><p class="paragraph"/>It is also possible to attach content as inline resources. This is particularly useful in the case of html email where you wish to embed images in the message. In this case you specify a  <em class="italic">content id</em>  instead of a file name for the attachment and then reference this content id in your mail message.<p class="paragraph"/>To attach an image as an inline resource you could do…<p class="paragraph"/><div class="code"><pre>sendMail &#123;
    multipart <span class="java&#45;keyword">true</span>
    to <span class="java&#45;quote">"someone@org.com"</span>
    inline <span class="java&#45;quote">"logo"</span>, <span class="java&#45;quote">"image/jpeg"</span>, <span class="java&#45;keyword">new</span> File(<span class="java&#45;quote">"logo.jpg"</span>)
    html view: <span class="java&#45;quote">"/email/welcome"</span>
&#125;</pre></div><p class="paragraph"/>Then in your view you reference the inline attachment using the <code>cid:</code> (content id) namespace…<p class="paragraph"/><div class="code"><pre>&#60;html&#62;
  &#60;body&#62;
    &#60;img src='cid:logo' /&#62;
    &#60;p&#62;Welcome Aboard!&#60;/p&#62;
  &#60;/body&#62;
&#60;/html&#62;</pre></div><p class="paragraph"/>The following methods are available in the mail DSL to attach files…<p class="paragraph"/><div class="code"><pre>// Bytes
inline(<span class="java&#45;object">String</span> fileName, <span class="java&#45;object">String</span> contentType, <span class="java&#45;object">byte</span>&#91;&#93; bytes)<p class="paragraph"/>// Files
inline(File file)
inline(<span class="java&#45;object">String</span> fileName, File file)
inline(<span class="java&#45;object">String</span> fileName, <span class="java&#45;object">String</span> contentType, File file)<p class="paragraph"/>// InputStream
inline(<span class="java&#45;object">String</span> fileName, <span class="java&#45;object">String</span> contentType, InputStreamSource source)</pre></div><p class="paragraph"/>There are 3 things that need to be provided when creating an inline attachment:
<ul class="star">
<li>content id - the identifier of the resource</li>
<li>content type - what mime type the email client will treat the content as</li>
<li>content source - the actual content</li>
</ul><p class="paragraph"/>The mail plugin supports using either a <code>byte&#91;&#93;</code>, <code>File</code>, or <a href="http://static.springsource.org/spring/docs/current/api/org/springframework/core/io/InputStreamSource.html" target="blank"><code>InputStreamSource</code></a> as the content source.<p class="paragraph"/>In the case of the variants that take a <code>File</code> that do not specify a content id, the name of the file will be used.<p class="paragraph"/>In the case of the variants that take a <code>File</code> that do not specify a content type, the content type will be guessed based on the file extension.


                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../../guide/2.%20Configuration.html">&lt;&lt; <strong>2</strong><span>Configuration</span></a></div>
                
                    <div class="toc-item next-right"><a href="../../guide/4.%20Testing.html"><strong>4</strong><span>Testing</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
